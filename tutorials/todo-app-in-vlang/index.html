<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Jan Savage ">
<meta name="description" content="V language, also known as Vlang promises C&amp;rsquo;s speed, Rust&amp;rsquo;s safety, Go&amp;rsquo;s syntax. However, there is only one Vlang book avaiable from Packt and even that is simply listing language features&amp;ndash;a mere simpler documentation.
In this tutorial, I provide a real-world practical example: a command-line to-do app.
Audience:
Students and enthusiasts who have learned some programming but don&amp;rsquo;t know what to do next. They taught you to draw shapes, now draw the owl!" />
<meta name="keywords" content="programming, tutorials, programming" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://dersavage.github.io/main/tutorials/todo-app-in-vlang/" />


    <title>
        
            A To-Do app in Vlang :: Jan Savage  â€” The Jan Savage cave
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="https://dersavage.github.io/main/main.b6d528998b7b504bfd8ef86303ede1785102ea45c0c86ef0215145b1e5778a9d.css">



    <link rel="apple-touch-icon" sizes="180x180" href="https://dersavage.github.io/main/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://dersavage.github.io/main/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://dersavage.github.io/main/favicon-16x16.png">
    <link rel="manifest" href="https://dersavage.github.io/main/site.webmanifest">
    <link rel="mask-icon" href="https://dersavage.github.io/main/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="https://dersavage.github.io/main/favicon.ico">
    <meta name="msapplication-TileColor" content="">


<meta itemprop="name" content="A To-Do app in Vlang">
<meta itemprop="description" content="V language, also known as Vlang promises C&rsquo;s speed, Rust&rsquo;s safety, Go&rsquo;s syntax. However, there is only one Vlang book avaiable from Packt and even that is simply listing language features&ndash;a mere simpler documentation.
In this tutorial, I provide a real-world practical example: a command-line to-do app.
Audience:
Students and enthusiasts who have learned some programming but don&rsquo;t know what to do next. They taught you to draw shapes, now draw the owl!"><meta itemprop="datePublished" content="2023-06-27T19:06:52+08:00" />
<meta itemprop="dateModified" content="2023-06-27T19:06:52+08:00" />
<meta itemprop="wordCount" content="1436"><meta itemprop="image" content="https://dersavage.github.io/main/"/>
<meta itemprop="keywords" content="tutorials, programming," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://dersavage.github.io/main/"/>

<meta name="twitter:title" content="A To-Do app in Vlang"/>
<meta name="twitter:description" content="V language, also known as Vlang promises C&rsquo;s speed, Rust&rsquo;s safety, Go&rsquo;s syntax. However, there is only one Vlang book avaiable from Packt and even that is simply listing language features&ndash;a mere simpler documentation.
In this tutorial, I provide a real-world practical example: a command-line to-do app.
Audience:
Students and enthusiasts who have learned some programming but don&rsquo;t know what to do next. They taught you to draw shapes, now draw the owl!"/>




    <meta property="og:title" content="A To-Do app in Vlang" />
<meta property="og:description" content="V language, also known as Vlang promises C&rsquo;s speed, Rust&rsquo;s safety, Go&rsquo;s syntax. However, there is only one Vlang book avaiable from Packt and even that is simply listing language features&ndash;a mere simpler documentation.
In this tutorial, I provide a real-world practical example: a command-line to-do app.
Audience:
Students and enthusiasts who have learned some programming but don&rsquo;t know what to do next. They taught you to draw shapes, now draw the owl!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dersavage.github.io/main/tutorials/todo-app-in-vlang/" /><meta property="og:image" content="https://dersavage.github.io/main/"/><meta property="article:section" content="tutorials" />
<meta property="article:published_time" content="2023-06-27T19:06:52+08:00" />
<meta property="article:modified_time" content="2023-06-27T19:06:52+08:00" />






    <meta property="article:published_time" content="2023-06-27 19:06:52 &#43;0800 CST" />











    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://dersavage.github.io/main/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">~</span>
            <span class="logo__text">% cd /home/</span>
            <span class="logo__cursor" style=
                  "
                   background-color:#4000ff;
                   animation-duration:1.1s;">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://dersavage.github.io/main/about/">Abt</a></li><li><a href="https://dersavage.github.io/main/books/">Books</a></li><li><a href="https://dersavage.github.io/main/essays/">Essays</a></li><li><a href="https://dersavage.github.io/main/reviews/">Revs</a></li><li><a href="https://dersavage.github.io/main/tutorials/">Tuts</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
                <span class="theme-toggle not-selectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
   <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
   3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
   13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
 </svg></span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="https://dersavage.github.io/main/tutorials/todo-app-in-vlang/">A To-Do app in Vlang</a></h2>

            
            
            

            <div class="post-content">
                <p>V language, also known as Vlang promises C&rsquo;s speed, Rust&rsquo;s safety, Go&rsquo;s syntax. However, there is only one Vlang book avaiable from Packt and even that is simply listing language features&ndash;a mere simpler documentation.</p>
<p>In this tutorial, I provide a real-world practical example: a command-line to-do app.</p>
<blockquote>
<p>Audience:</p>
</blockquote>
<p>Students and enthusiasts who have learned some programming but don&rsquo;t know what to do next. They taught you to draw shapes, now draw the owl!&ndash;that type of frustrated learners who know language syntax (of any language) but don&rsquo;t know what to do with it or where to begin the next step.</p>
<blockquote>
<p>Why Vlang</p>
</blockquote>
<p>Because it&rsquo;s learner-friendly but also very modern. It is a new language, so there won&rsquo;t be any jobs etc. for it&ndash;yet&ndash;but the syntax is very clear and similar to Go&ndash;the skills can transfer. Also, it&rsquo;s fast!</p>
<blockquote>
<p>Prereq</p>
</blockquote>
<p>Familiarity with Vlang syntax. General programming 101 including structs, loops, functions, enums and IO.</p>
<blockquote>
<p>Help</p>
</blockquote>
<p>This tutorial is in beta now. Two versions are being written: one, for total beginners and will also teach them Vlang syntax and the programming 101 concepts, tools and techniques. Another version does not teach Vlang and programming but goes into great detail explaining each part of this program. The resulting booklets will be announced on my Quora and also here.</p>
<p>Let&rsquo;s go!</p>
<p>First, let&rsquo;s Import the needed modules:</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span> <span style="color:#fff;font-weight:bold">import</span> os
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> flag
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> json
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> fmt</span></span></code></pre></div>
<p>Next, we define a custom type for each task:</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">struct</span> Task {
</span></span><span style="display:flex;"><span>    id <span style="color:#fff;font-weight:bold">int</span>
</span></span><span style="display:flex;"><span>    name <span style="color:#fff;font-weight:bold">string</span>
</span></span><span style="display:flex;"><span>    done <span style="color:#fff;font-weight:bold">bool</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Define a global variable for the file name:</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">const</span> file_name = <span style="color:#0ff;font-weight:bold">&#39;tasks.json&#39;</span>
</span></span></code></pre></div><p>Define a function that loads the tasks from the file:</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">fn</span> load_tasks() []Task {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Check if the file exists
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> !os.exists(file_name) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Return empty array if not
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">return</span> []
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Open the file for reading
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    f := os.open(file_name) <span style="color:#fff;font-weight:bold">or</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Handle any error
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">eprintln</span>(<span style="color:#0ff;font-weight:bold">&#39;Failed to open </span>$file_name<span style="color:#0ff;font-weight:bold">: </span>$err<span style="color:#0ff;font-weight:bold">&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">exit</span>(<span style="color:#ff0;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Read all the content from the file
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    data := f.read_all() <span style="color:#fff;font-weight:bold">or</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Handle any error
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">eprintln</span>(<span style="color:#0ff;font-weight:bold">&#39;Failed to read </span>$file_name<span style="color:#0ff;font-weight:bold">: </span>$err<span style="color:#0ff;font-weight:bold">&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">exit</span>(<span style="color:#ff0;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Close the file
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    f.<span style="color:#fff;font-weight:bold">close</span>() <span style="color:#fff;font-weight:bold">or</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Handle any error
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">eprintln</span>(<span style="color:#0ff;font-weight:bold">&#39;Failed to close </span>$file_name<span style="color:#0ff;font-weight:bold">: </span>$err<span style="color:#0ff;font-weight:bold">&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">exit</span>(<span style="color:#ff0;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Decode the JSON data into an array of tasks
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    tasks := json.decode([]Task, data) <span style="color:#fff;font-weight:bold">or</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Handle any error
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">eprintln</span>(<span style="color:#0ff;font-weight:bold">&#39;Failed to decode JSON data: </span>$err<span style="color:#0ff;font-weight:bold">&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">exit</span>(<span style="color:#ff0;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Return the array of tasks
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">return</span> tasks
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Now let&rsquo;s define a function that saves the tasks to the file:</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">fn</span> save_tasks(tasks []Task) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Encode the array of tasks into JSON data
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    data := json.encode(tasks) <span style="color:#fff;font-weight:bold">or</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Handle any error
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">eprintln</span>(<span style="color:#0ff;font-weight:bold">&#39;Failed to encode JSON data: </span>$err<span style="color:#0ff;font-weight:bold">&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">exit</span>(<span style="color:#ff0;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Open the file for writing
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    f := os.create(file_name) <span style="color:#fff;font-weight:bold">or</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Handle any error
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">eprintln</span>(<span style="color:#0ff;font-weight:bold">&#39;Failed to create </span>$file_name<span style="color:#0ff;font-weight:bold">: </span>$err<span style="color:#0ff;font-weight:bold">&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">exit</span>(<span style="color:#ff0;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Write the JSON data to the file
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    f.write(data) <span style="color:#fff;font-weight:bold">or</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Handle any error
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">eprintln</span>(<span style="color:#0ff;font-weight:bold">&#39;Failed to write </span>$file_name<span style="color:#0ff;font-weight:bold">: </span>$err<span style="color:#0ff;font-weight:bold">&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">exit</span>(<span style="color:#ff0;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Close the file
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    f.<span style="color:#fff;font-weight:bold">close</span>() <span style="color:#fff;font-weight:bold">or</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Handle any error
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">eprintln</span>(<span style="color:#0ff;font-weight:bold">&#39;Failed to close </span>$file_name<span style="color:#0ff;font-weight:bold">: </span>$err<span style="color:#0ff;font-weight:bold">&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">exit</span>(<span style="color:#ff0;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Next, a function that prints the usage information:</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">fn</span> print_usage() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">println</span>(<span style="color:#0ff;font-weight:bold">&#39;Usage: todo [flags] [commands]&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">println</span>(<span style="color:#0ff;font-weight:bold">&#39;A simple command line to-do list app.&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">println</span>(<span style="color:#0ff;font-weight:bold">&#39;Flags:&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">println</span>(<span style="color:#0ff;font-weight:bold">&#39;  -h, --help    Show this help message and exit&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">println</span>(<span style="color:#0ff;font-weight:bold">&#39;Commands:&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">println</span>(<span style="color:#0ff;font-weight:bold">&#39;  add [name]    Add a new task with the given name&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">println</span>(<span style="color:#0ff;font-weight:bold">&#39;  list          List all the tasks&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">println</span>(<span style="color:#0ff;font-weight:bold">&#39;  done [id]     Mark the task with the given id as done&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">println</span>(<span style="color:#0ff;font-weight:bold">&#39;  delete [id]   Delete the task with the given id&#39;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Followed by a function that prints the tasks in a table format:</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">fn</span> print_tasks(tasks []Task) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Define some constants for the table format
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">const</span> (
</span></span><span style="display:flex;"><span>        col1_width = <span style="color:#ff0;font-weight:bold">5</span>
</span></span><span style="display:flex;"><span>        col2_width = <span style="color:#ff0;font-weight:bold">30</span>
</span></span><span style="display:flex;"><span>        col3_width = <span style="color:#ff0;font-weight:bold">10</span>
</span></span><span style="display:flex;"><span>        sep_char = <span style="color:#0ff;font-weight:bold">&#39;-&#39;</span>
</span></span><span style="display:flex;"><span>        sep_line = sep_char.<span style="color:#fff;font-weight:bold">repeat</span>(col1_width + col2_width + col3_width + <span style="color:#ff0;font-weight:bold">6</span>)
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Print the table header
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">println</span>(sep_line)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">println</span>(<span style="color:#0ff;font-weight:bold">&#39;| ID | Name                          | Status   |&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">println</span>(sep_line)
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Print each task in a row
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">for</span> task <span style="color:#fff;font-weight:bold">in</span> tasks {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Format the task fields
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        id := fmt.pad_left(task.id.<span style="color:#fff;font-weight:bold">str</span>(), col1_width, <span style="color:#0ff;font-weight:bold">&#39; &#39;</span>)
</span></span><span style="display:flex;"><span>        name := fmt.pad_right(task.name, col2_width, <span style="color:#0ff;font-weight:bold">&#39; &#39;</span>)
</span></span><span style="display:flex;"><span>        status := <span style="color:#fff;font-weight:bold">if</span> task.done { <span style="color:#0ff;font-weight:bold">&#39;Done&#39;</span> } <span style="color:#fff;font-weight:bold">else</span> { <span style="color:#0ff;font-weight:bold">&#39;Pending&#39;</span> }
</span></span><span style="display:flex;"><span>        status = fmt.pad_right(status, col3_width, <span style="color:#0ff;font-weight:bold">&#39; &#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Print the row
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">println</span>(<span style="color:#0ff;font-weight:bold">&#39;| </span>$id<span style="color:#0ff;font-weight:bold"> | </span>$name<span style="color:#0ff;font-weight:bold"> | </span>$status<span style="color:#0ff;font-weight:bold"> |&#39;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Print the table footer
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">println</span>(sep_line)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Define a function that adds a new task with the given name:</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">fn</span> add_task(tasks <span style="color:#fff;font-weight:bold">mut</span> []Task, name <span style="color:#fff;font-weight:bold">string</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Generate a unique id for the new task
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">mut</span> id := <span style="color:#ff0;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">for</span> task <span style="color:#fff;font-weight:bold">in</span> tasks {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> task.id &gt;= id {
</span></span><span style="display:flex;"><span>            id = task.id + <span style="color:#ff0;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Create a new task with the id, name, and done status
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    new_task := Task{
</span></span><span style="display:flex;"><span>        id: id
</span></span><span style="display:flex;"><span>        name: name
</span></span><span style="display:flex;"><span>        done: <span style="color:#fff;font-weight:bold">false</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Append the new task to the array of tasks
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    tasks &lt;&lt; new_task
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Save the tasks to the file
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    save_tasks(tasks)
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Print a success message
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">println</span>(<span style="color:#0ff;font-weight:bold">&#39;Added a new task: </span>$new_task<span style="color:#0ff;font-weight:bold">&#39;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Define a function that marks the task with the given id as done:</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">fn</span> done_task(tasks <span style="color:#fff;font-weight:bold">mut</span> []Task, id <span style="color:#fff;font-weight:bold">int</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Find the index of the task with the id in the array of tasks
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">mut</span> index := -<span style="color:#ff0;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">for</span> i, task <span style="color:#fff;font-weight:bold">in</span> tasks {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> task.id == id {
</span></span><span style="display:flex;"><span>            index = i
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">break</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Check if the index is valid
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> index == -<span style="color:#ff0;font-weight:bold">1</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Print an error message if not
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">eprintln</span>(<span style="color:#0ff;font-weight:bold">&#39;Invalid task id: </span>$id<span style="color:#0ff;font-weight:bold">&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">exit</span>(<span style="color:#ff0;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Mark the task as done by changing its done status to true
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    tasks[index].done = <span style="color:#fff;font-weight:bold">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Save the tasks to the file
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    save_tasks(tasks)
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// Print a success message
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">println</span>(<span style="color:#0ff;font-weight:bold">&#39;Marked the task as done: </span>$tasks<span style="color:#0ff;font-weight:bold">[index]&#39;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Define a function that deletes the task with the given id:</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">fn</span> delete_task(tasks <span style="color:#fff;font-weight:bold">mut</span> []Task, id <span style="color:#fff;font-weight:bold">int</span>) {
</span></span><span style="display:flex;"><span>     <span style="color:#007f7f">// Find the index of the task with the id in the array of tasks
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>     <span style="color:#fff;font-weight:bold">mut</span> index := -<span style="color:#ff0;font-weight:bold">1</span> 
</span></span><span style="display:flex;"><span>     <span style="color:#fff;font-weight:bold">for</span> i, task <span style="color:#fff;font-weight:bold">in</span> tasks { 
</span></span><span style="display:flex;"><span>         <span style="color:#fff;font-weight:bold">if</span> task.id == id { 
</span></span><span style="display:flex;"><span>             index = i 
</span></span><span style="display:flex;"><span>             <span style="color:#fff;font-weight:bold">break</span> 
</span></span><span style="display:flex;"><span>         } 
</span></span><span style="display:flex;"><span>     } 
</span></span><span style="display:flex;"><span>     <span style="color:#007f7f">// Check if the index is valid 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>     <span style="color:#fff;font-weight:bold">if</span> index == -<span style="color:#ff0;font-weight:bold">1</span> { 
</span></span><span style="display:flex;"><span>         <span style="color:#007f7f">// Print an error message if not 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>         <span style="color:#fff;font-weight:bold">eprintln</span>(<span style="color:#0ff;font-weight:bold">&#39;Invalid task id: </span>$id<span style="color:#0ff;font-weight:bold">&#39;</span>) 
</span></span><span style="display:flex;"><span>         <span style="color:#fff;font-weight:bold">exit</span>(<span style="color:#ff0;font-weight:bold">1</span>) 
</span></span><span style="display:flex;"><span>     } 
</span></span><span style="display:flex;"><span>     <span style="color:#007f7f">// Delete the task by removing it from the array of tasks 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>     deleted_task := tasks[index] 
</span></span><span style="display:flex;"><span>     tasks.<span style="color:#fff;font-weight:bold">delete</span>(index) 
</span></span><span style="display:flex;"><span>     <span style="color:#007f7f">// Save the tasks to the file 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>     save_tasks(tasks) 
</span></span><span style="display:flex;"><span>     <span style="color:#007f7f">// Print a success message 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>     <span style="color:#fff;font-weight:bold">println</span>(<span style="color:#0ff;font-weight:bold">&#39;Deleted the task: </span>$deleted_task<span style="color:#0ff;font-weight:bold">&#39;</span>) 
</span></span><span style="display:flex;"><span> }
</span></span></code></pre></div><p>Load the tasks from the file into an array of tasks</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">mut</span> tasks := load_tasks()
</span></span></code></pre></div><p>Create a flag parser to parse command line arguments and options</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">mut</span> fp := flag.new_flag_parser(os.args)
</span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">```v
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">Add some flags to show help information and version number
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">```</span>v
</span></span><span style="display:flex;"><span>fp.add_bool(<span style="color:#0ff;font-weight:bold">&#39;help&#39;</span>, <span style="color:#0ff;font-weight:bold">`h`</span>, <span style="color:#fff;font-weight:bold">false</span>, <span style="color:#0ff;font-weight:bold">&#39;Show this help message and exit&#39;</span>)
</span></span><span style="display:flex;"><span>fp.add_string(<span style="color:#0ff;font-weight:bold">&#39;version&#39;</span>, <span style="color:#0ff;font-weight:bold">`v`</span>, <span style="color:#0ff;font-weight:bold">&#39;&#39;</span>, <span style="color:#0ff;font-weight:bold">&#39;Show program version and exit&#39;</span>)
</span></span></code></pre></div><p>Parse command line arguments and options into a map of flags and values</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span>flags := fp.parse()
</span></span></code></pre></div><p>Check if help flag is set or no command is given</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">if</span> flags[<span style="color:#0ff;font-weight:bold">&#39;help&#39;</span>].<span style="color:#fff;font-weight:bold">bool</span>() || fp.args.len == <span style="color:#ff0;font-weight:bold">0</span> {
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">// Print usage information and exit 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>   print_usage
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">exit</span>(<span style="color:#ff0;font-weight:bold">0</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Check if version flag is set</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">if</span> flags[<span style="color:#0ff;font-weight:bold">&#39;version&#39;</span>].<span style="color:#fff;font-weight:bold">str</span>() <span style="color:#fff;font-weight:bold">!</span>= <span style="color:#0ff;font-weight:bold">&#39;&#39;</span> {
</span></span><span style="display:flex;"><span>   <span style="color:#007f7f">// Print program version and exit 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>   <span style="color:#fff;font-weight:bold">println</span>(<span style="color:#0ff;font-weight:bold">&#39;todo v0.1.0&#39;</span>)
</span></span><span style="display:flex;"><span>   <span style="color:#fff;font-weight:bold">exit</span>(<span style="color:#ff0;font-weight:bold">0</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Get the command from the first argument</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span>command := fp.args[<span style="color:#ff0;font-weight:bold">0</span>]
</span></span></code></pre></div><p>Check what command is given and call the corresponding function</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-v" data-lang="v"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">match</span> command {
</span></span><span style="display:flex;"><span>    <span style="color:#0ff;font-weight:bold">&#39;add&#39;</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Check if a name is given as the second argument
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> fp.args.len &lt; <span style="color:#ff0;font-weight:bold">2</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// Print an error message and exit if not
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">eprintln</span>(<span style="color:#0ff;font-weight:bold">&#39;Missing task name&#39;</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">exit</span>(<span style="color:#ff0;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Get the name from the second argument
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        name := fp.args[<span style="color:#ff0;font-weight:bold">1</span>]
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Call the add_task function with the tasks array and the name
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        add_task(<span style="color:#fff;font-weight:bold">mut</span> tasks, name)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#0ff;font-weight:bold">&#39;list&#39;</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Call the print_tasks function with the tasks array
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        print_tasks(tasks)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#0ff;font-weight:bold">&#39;done&#39;</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Check if an id is given as the second argument
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> fp.args.len &lt; <span style="color:#ff0;font-weight:bold">2</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// Print an error message and exit if not
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">eprintln</span>(<span style="color:#0ff;font-weight:bold">&#39;Missing task id&#39;</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">exit</span>(<span style="color:#ff0;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Get the id from the second argument and convert it to an int
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        id := fp.args[<span style="color:#ff0;font-weight:bold">1</span>].<span style="color:#fff;font-weight:bold">int</span>() <span style="color:#fff;font-weight:bold">or</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// Print an error message and exit if conversion fails
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">eprintln</span>(<span style="color:#0ff;font-weight:bold">&#39;Invalid task id: </span>$fp.args<span style="color:#0ff;font-weight:bold">[1]&#39;</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">exit</span>(<span style="color:#ff0;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Call the done_task function with the tasks array and the id
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        done_task(<span style="color:#fff;font-weight:bold">mut</span> tasks, id)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#0ff;font-weight:bold">&#39;delete&#39;</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Check if an id is given as the second argument
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> fp.args.len &lt; <span style="color:#ff0;font-weight:bold">2</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// Print an error message and exit if not
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">eprintln</span>(<span style="color:#0ff;font-weight:bold">&#39;Missing task id&#39;</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">exit</span>(<span style="color:#ff0;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Get the id from the second argument and convert it to an int
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        id := fp.args[<span style="color:#ff0;font-weight:bold">1</span>].<span style="color:#fff;font-weight:bold">int</span>() <span style="color:#fff;font-weight:bold">or</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// Print an error message and exit if conversion fails
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">eprintln</span>(<span style="color:#0ff;font-weight:bold">&#39;Invalid task id: </span>$fp.args<span style="color:#0ff;font-weight:bold">[1]&#39;</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">exit</span>(<span style="color:#ff0;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Call the delete_task function with the tasks array and the id
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        delete_task(<span style="color:#fff;font-weight:bold">mut</span> tasks, id)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// Print an error message and exit if unknown command is given
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">eprintln</span>(<span style="color:#0ff;font-weight:bold">&#39;Unknown command: </span>$command<span style="color:#0ff;font-weight:bold">&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">exit</span>(<span style="color:#ff0;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
            </div>
        </article>

        <hr />

        <div class="post-info">
            
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://dersavage.github.io/main/tags/tutorials-programming/">tutorials, programming</a></span>
        
    </p>

            
  		</div>
    </main>

            </div>

            
                <footer class="footer">
    
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2023</span>
            <span><a href="https://dersavage.github.io/main/">Jan Savage</a></span>
            
            <span><a href="https://dersavage.github.io/main/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
            
        </div>
    </div>
    
    
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
        </div>
    </div>
    
</footer>

            
        </div>

        



<script type="text/javascript" src="https://dersavage.github.io/main/bundle.min.98fef7958ed12b899250a29a40d2a730eda779c87de1fae22a4cf6c7e87088a65ac7537f5be758af43c4f3a8876e5117be9d027b8090c55f80a610864d08e384.js" integrity="sha512-mP73lY7RK4mSUKKaQNKnMO2nech94friKkz2x&#43;hwiKZax1N/W&#43;dYr0PE86iHblEXvp0Ce4CQxV&#43;AphCGTQjjhA=="></script>



    </body>
</html>
